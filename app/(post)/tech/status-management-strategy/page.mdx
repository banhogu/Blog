---
title: RSCμ™€ SSRμ„ κ³ λ ¤ν• μƒνƒ κ΄€λ¦¬ μ „λµ
tag: tech
description: ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„ μ„λ²„ μ»΄ν¬λ„νΈλ΅ μ „ν™ν•κΈ°
subTitle: ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„ μ„λ²„ μ»΄ν¬λ„νΈλ΅ μ „ν™ν•κΈ°
date: 2024-08-22
---

import { FileName } from '@/components/ui/FileName';
import { Callout } from '@/components/ui/callout';

## λ„μ…λ°°κ²½

![](/images/tech/status-management-strategy/1.png)

ν„μ¬ μ§„ν–‰μ¤‘μΈ λ¨μ•„κ°€μ΄λ“ ν”„λ΅μ νΈ λ©”μΈνμ΄μ§€μ λ””μμΈμ„ λ³΄λ©΄ ν™, μµμ‹ μ΄μ, μ΅°κ°ν¬μ μƒν’, λ¦¬ν¬νΈ μƒνƒ μΉ΄ν…κ³ λ¦¬μ— λ”°λΌ μ μ ν• μ»΄ν¬λ„νΈκ°€ λ λ”λ§ λμ–΄μ•Ό ν•λ‹¤.

μ΄λ ‡κ² μΉ΄ν…κ³ λ¦¬ μƒνƒμ— λ”°λ¥Έ μ»΄ν¬λ„νΈ λ λ”λ§μ„ μ„ν•΄ μƒκ°ν•΄λ‚Έ μ΄κΈ° μ•„μ΄λ””μ–΄λ” λ‹¤μκ³Ό κ°™λ‹¤.

- GNB μ»΄ν¬λ„νΈμ—μ„ μΉ΄ν…κ³ λ¦¬ ν΄λ¦­ μ‹, ν΄λ¦­ λ μΉ΄ν…κ³ λ¦¬λ¥Ό currentCategory ν„μ¬ μΉ΄ν…κ³ λ¦¬ μƒνƒλ΅ μ§€μ •
- λ³€κ²½λ μΉ΄ν…κ³ λ¦¬ μƒνƒλ¥Ό κ°μ§€ν•μ—¬ λ©”μΈνμ΄μ§€μ—μ„ λ¶„κΈ°μ μΌλ΅ μ»΄ν¬λ„νΈ λ λ”λ§

ν•μ§€λ§ μΉ΄ν…κ³ λ¦¬λ¥Ό `useState`μ μƒνƒλ΅ μ§€μ •ν•κ² λλ©΄ λ°μƒν•λ” λ¬Έμ κ°€ μμ—λ‹¤. <br/><br/>

<FileName>RootLayout</FileName>

```tsx
export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="kr" className={`${pretendard.variable}`}>
      <body className={pretendard.className}>
        <IntegrateMSW>
          <QueryProvider>
            <Script
              strategy="beforeInteractive"
              src={`//dapi.kakao.com/v2/maps/sdk.js?appkey=${process.env.NEXT_PUBLIC_MAP_KEY}&autoload=false`}
            />
            <Gnb /> //Here!!
            {children}
            <ModalProvider />
            <div id="root-portal"></div>
          </QueryProvider>
        </IntegrateMSW>
      </body>
    </html>
  );
}
```

`Gnb` μ»΄ν¬λ„νΈλ” ν„μ¬ `RootLayout` μ»΄ν¬λ„νΈμ— μ„μΉν•κ³  μμΌλ―€λ΅ `Gnb` μ»΄ν¬λ„νΈμ—μ„ `useState`λ¥Ό μ‚¬μ©ν•΄ ν™, μµμ‹ μ΄μ, μ΅°κ°ν¬μ μƒν’, λ¦¬ν¬νΈ μΉ΄ν…κ³ λ¦¬λ¥Ό λ„λ¥΄κ² λλ©΄ `setState` μ•΅μ…μ΄ μΌμ–΄λ‚κ² λκ³ , <br/><br/>

<FileName>Mainpage</FileName>

```tsx
const Mainpage = ({ currentCategory }) => {
  return (
    <div>
      <Navbar />
      {currentCategory === 'home' && <HomeIndex />}
      {currentCategory === 'new_issue' && <RecentlyIssueIndex />}
      {currentCategory === 'report' && <ReportIndex />}
    </div>
  );
};
```

μ΄λ ‡κ² λ³€κ²½λ currentCategory State κ°’μ„ κ°μ§€ν•κΈ° μ„ν•΄ μ € λ©€λ¦¬ λ©”μΈνμ΄μ§€ childrenμΌλ΅ propsμ™€ ν•¨κ» λ‚΄λ ¤λ³΄λ‚΄μ•Ό ν•λ―€λ΅ μ„ μ½”λ“μ™€ κ°™μ΄ λ¶ν•„μ”ν• Prop Drillingμ΄ λ°μƒν–λ‹¤.

λ•λ¬Έμ— λ¶ν•„μ”ν• Prop Drillingκ³Ό λ‹¨μν™”λ μ½”λ“ νλ¦„μ„ μ„ν•΄ ν•΄λ‹Ή currentCategory μƒνƒλ¥Ό zustandλ¥Ό μ΄μ©ν•μ—¬ μ „μ—­μΌλ΅ κ΄€λ¦¬ν•λ„λ΅ ν–λ‹¤.<br/><br/>

<FileName>zustand μΉ΄ν…κ³ λ¦¬ μ „μ—­ μƒνƒ κ΄€λ¦¬</FileName>

```tsx
import { create } from 'zustand';

/**
 * currentNav : home(ν™), μµμ‹ μ΄μ(new_issue), μ΅°κ°ν¬μ μƒν’(item), λ¦¬ν¬νΈ(report)
 */

interface useNavStoreType {
  currentNav: string;
  setCurrentNav: (payload: string) => void;
}

export const useNavStore = create<useNavStoreType>((set) => ({
  currentNav: 'home',
  setCurrentNav: (payload: string) =>
    set(() => ({
      currentNav: payload,
    })),
}));
```

<br />
<br />

<FileName>GNB μ»΄ν¬λ„νΈμ—μ„ μ „μ—­ μΉ΄ν…κ³ λ¦¬ State μ§μ ‘ λ³€κ²½</FileName>

```tsx
const GNB = () => {
  const { currentNav, setCurrentNav } = useNavStore();
  return (
    <div className="shadow-custom-light border-b border-gray100 ">
     ...
         <div
          onClick={() => setCurrentNav('home')}
          ...
          >
          ν™
        </div>
         <div
          onClick={() => setCurrentNav('new_issue')}
          ...
          >
          μµμ‹  μ΄μ
        </div>
         <div
          onClick={() => setCurrentNav('item')}
          ...
          >
          μ΅°κ° ν¬μ μƒν’
        </div>
        <div
          onClick={() => setCurrentNav('report')}
          ...
          >
          λ¦¬ν¬νΈ
        </div>
      </div>
    </div>
  );
};
```

<br />
<br />

<FileName>Mainpageμ—μ„ μ „μ—­ μΉ΄ν…κ³ λ¦¬ State μ§μ ‘ μ‚¬μ©</FileName>

```tsx
const Mainpage = () => {
  const { currentNav } = useNavStore();
  return (
    <div>
      <Navbar />
      {currentNav === 'home' && <HomeIndex />}
      {currentNav === 'new_issue' && <RecentlyIssueIndex />}
      {currentNav === 'report' && <ReportIndex />}
      {currentNav === 'product' && <ProductIndex />}
    </div>
  );
};
```

κΈ°μ΅΄ setState λ™μ‘μ„ ν†µν•΄ current Category Stateλ¥Ό λ³€κ²½ν•κ³  μ΄λ¥Ό propsλ΅ λ°›μ•„μ¨ λ©”μΈ νμ΄μ§€μ—μ„ κ°μ§€ν•λ” κ²ƒμ΄ μ•„λ‹, current Categoryλ¥Ό μ „μ—­ Stateλ΅ μ „ν™ν•κ³ , setState λ€μ‹  zustandμ set μ•΅μ…μ„ ν†µν•΄ ν•΄λ‹Ή Stateλ¥Ό λ³€κ²½ν•λ©΄ Mainpageμ—μ„ μ΄λ¥Ό κ°μ§€ν•μ—¬ μΉ΄ν…κ³ λ¦¬μ— μ•λ§μ€ μ»΄ν¬λ„νΈλ¥Ό λ¶„κΈ°μ μΌλ΅ λ λ”λ§ν•κ² λλ”κ²ƒμ΄λ‹¤.

### λ¬Έμ  λ°μƒ

ν•μ§€λ§ `zustand`μ™€ κ°™μ€ ν΄λΌμ΄μ–ΈνΈ μƒνƒ κ΄€λ¦¬ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•λ” κ²½μ°, μƒνƒλ¥Ό κµ¬λ…ν•κ³  μ‚¬μ©ν•λ” μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ λ§λ“¤μ–΄μ•Ό ν•λ‹¤. μ΄λ” `zustand`κ°€ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ™μ‘ν•λ” JavaScript μƒνƒ κ΄€λ¦¬ λΌμ΄λΈλ¬λ¦¬μ΄κΈ° λ•λ¬Έμ—, μƒνƒλ¥Ό μ‚¬μ©ν•λ ¤λ©΄ μ»΄ν¬λ„νΈκ°€ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‹¤ν–‰λμ–΄μ•Ό ν•κΈ° λ•λ¬ΈμΈλ°, λ”°λΌμ„ λ©”μΈνμ΄μ§€ μµμƒμ„μ— `'use client'` μ„ μ–Έμ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ μ§€μ •ν•΄μ¤μ•Ό ν–λ‹¤.

ν•μ§€λ§ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ(`'use client'`κ°€ μ„ μ–Έλ μ»΄ν¬λ„νΈ)λ” μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό μμ‹μΌλ΅ κ°€μ§ μ μ—†λ‹¤. μ„λ²„ μ»΄ν¬λ„νΈλ” μ„λ²„μ—μ„ λ λ”λ§λκ³ , ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈμ—μ„ λ λ”λ§λκΈ° λ•λ¬Έμ—, μ„λ²„ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό ν¬ν•¨ν•  μ μμ§€λ§, ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°€ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό μμ‹μΌλ΅ ν¬ν•¨ν•  μ μ—†λ” κµ¬μ΅°μ  μ μ•½μ΄ μλ‹¤. λ•λ¬Έμ— `HomeIndex`, `RecentlyIssueIndex`, `ReportIndex` λ“±μ€ λ¨λ‘ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—¬μ•Ό ν•λ‹¤.

[κ΄€λ ¨κΈ€](https://www.banghojin.site/study/what-is-servercomponent)

μ—„λ°€ν λ§ν•μλ©΄ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ λ‚΄μ— μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό ν¬ν•¨ν•  μ μλ” κ²½μ°κ°€ μ΅΄μ¬ν•κΈ΄ ν•λ‹¤. μ„λ²„ μ»΄ν¬λ„νΈλ” μ„λ²„μ—μ„λ§ λ λ”λ§λλ©°, ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„λ” HTMLλ΅λ§ μ „λ‹¬λλ”λ°, ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°€ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό μμ‹μΌλ΅ κ°€μ§ κ²½μ°, μ„λ²„ μ»΄ν¬λ„νΈλ” μ„λ²„μ—μ„ λ―Έλ¦¬ λ λ”λ§λ HTMLμ„ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ μμ‹μΌλ΅ ν¬ν•¨μ‹ν‚¤κ² λλ‹¤.

ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°€ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό μμ‹μΌλ΅ ν¬ν•¨ν•  λ•, μ‹¤μ λ΅ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ™μ‘ν•λ” κ²ƒμ€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ μμ²΄μ΄κ³ , μ„λ²„ μ»΄ν¬λ„νΈλ” κ·Έ μ•μ— λ―Έλ¦¬ λ λ”λ§λ μ •μ  μ½ν…μΈ λ΅ ν¬ν•¨λλ―€λ΅, μ„λ²„ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ μ¬ν™μ©λλ”κ²ƒμ΄λ‹¤.<br/><br/>

<FileName>ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°€ μ„λ²„μ»΄ν¬λ„νΈλ¥Ό ν•μ„ μμ‹μΌλ΅ κ°–λ”λ²•</FileName>

```tsx
import ClientComponent from './ClientComponent';
import ServerComponent from './ServerComponent';

export default function Page() {
  return (
    <ClientComponent>
      <ServerComponent />
    </ClientComponent>
  );
}

('use client');

export default function ClientComponent({ children }) {
  return <>{children}</>;
}
```

μ„ μ½”λ“μ—μ„, `ClientComponent`κ°€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ΄κ³ , κ·Έ ν•μ„μ— `ServerComponent`κ°€ μ„μΉν•λ‹¤. `ServerComponent`λ” μ„λ²„μ—μ„ λ λ”λ§λμ–΄ HTMLλ΅λ§ μ „λ‹¬λκ³ , `ClientComponent`λ” ν΄λΌμ΄μ–ΈνΈμ—μ„ λ™μ‘ν•λ©° κ·Έ HTMLμ„ ν¬ν•¨ν•μ—¬ λ λ”λ§λλ‹¤.

ν•μ§€λ§ μ—­μ‹ λ¬Έμ μ μ΄ μ΅΄μ¬ν•λ”λ°, ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„λ” μ„λ²„ μ»΄ν¬λ„νΈκ°€ μ„λ²„μ—μ„ λ™μ μΌλ΅ κ°€μ Έμ¤λ” λ°μ΄ν„°λ¥Ό λ³€κ²½ν•κ±°λ‚ λ™μ μΌλ΅ μ΅°μ‘ν•  μ μ—†λ‹¤. λν• ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μƒνƒλ¥Ό κ΄€λ¦¬ν•κ³ , ν›…μ„ μ‚¬μ©ν•  μ μμ§€λ§, ν•μ„μ— μλ” μ„λ²„ μ»΄ν¬λ„νΈμ λ™μ‘μ—λ” μν–¥μ„ λ―ΈμΉμ§€ μ•λ”λ‹¤.

λ•λ¬Έμ— μ΄λ¬ν• λ‹¨μ μ„ μ•κ³  κ°€λ©΄μ„λ„ κµ³μ΄κµ³μ΄ μ–µμ§€λ΅ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό ν•μ„ μμ‹ μ»΄ν¬λ„νΈλ΅ κ°€μ§€λ”κ²ƒλ³΄λ‹¤λ” κ·Έλƒ¥ μµμƒμ„ λ©”μΈνμ΄μ§€λ¥Ό μ„λ²„ μ»΄ν¬λ„νΈλ΅ μ „ν™ν•λ”κ²ƒμ΄ λ” μΆ‹μ€ μ„ νƒμ§€λΌκ³  μƒκ°ν–λ‹¤.

![](/images/tech/status-management-strategy/2.png)

λν• λ‹¤λ¥Έ μ»΄ν¬λ„νΈ(ν™, μµμ‹ μ΄μ, λ¦¬ν¬νΈ)λ“¤μ€ κ·Έλ ‡λ‹¤ μΉκ³  μ΅°κ°ν¬μ ν”λ«νΌμ΄λΌλ” μ„λΉ„μ¤ νΉμ„±μƒ μ΅°κ°ν¬μ μƒν’ μΉ΄ν…κ³ λ¦¬μ—μ„μ μ΄κΈ° λ λ”λ§ μ„±λ¥ λ° SEO μµμ ν™”λ” κΌ­ ν•„μ”ν•΄λ³΄μ€κ³ , ν•΄λ‹Ή μ΅°κ°ν¬μ μƒν’ μΉ΄ν…κ³ λ¦¬μ SSR, μ„λ²„μ»΄ν¬λ„νΈ λ™μ‘μ€ κ°λ° μ΄κΈ°λ¶€ν„° λ©ν‘λ΅ μ„¤μ •ν• λ¶€λ¶„μ΄μ€κΈ° λ•λ¬Έμ— κµ¬μ΅°μ μΈ κ°μ„ μ΄ ν•„μ”ν•΄λ³΄μ€λ‹¤.

<br />

## ν•΄κ²° μ•„μ΄λ””μ–΄

μƒκ°ν•΄λ‚Έ ν•΄κ²° μ•„μ΄λ””μ–΄λ” λ‹¤μκ³Ό κ°™λ‹¤.

- zustand μ‚¬μ©μ²κ°€ μ–΄μ©”μ μ—†μ΄ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°€ λλ‹¤λ©΄, zustandλ‚ λ‹¤λ¥Έ Hook(useState)λ“¤μ„ λ€μ‹ ν•μ—¬ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό μ μ§€ν•λ©΄μ„ μΉ΄ν…κ³ λ¦¬λ³„ κµ¬λ¶„μ„ μ§€μ„ μ μλ” λ°©λ²•μ΄ μμ„κΉ? λν• λ¨λ“  λ¶„κΈ°λλ” μ»΄ν¬λ„νΈλ” ν•λ‚μ νμ΄μ§€ μ•μ—μ„ λ λ”λ§λμ–΄μ•Ό ν•λ‹¤.
- `useSearchParams` λ¥Ό μ΄μ©ν•λ‹¤. μƒνƒμ— λ”°λ¥Έ κµ¬λ¶„μ΄ μ•„λ‹, paramsμ— λ”°λΌ μΉ΄ν…κ³ λ¦¬λ¥Ό κµ¬λ¶„ν•λ‹¤.
- Nav μ»΄ν¬λ„νΈμ—μ„λ” κΈ°μ΅΄ set ν•¨μκ°€ μ•„λ‹, `useRouter` λ¥Ό μ΄μ©ν•μ—¬ μΉ΄λ°κ³ λ¦¬μ— λ§λ” paramsλ¥Ό μ§€μ •ν•λ‹¤. λ©”μΈνμ΄μ§€μ—μ„λ” μ΄λ¥Ό `searchParams` λ΅ κ°μ§€ν•μ—¬ λ³€κ²½λ μΉ΄ν…κ³ λ¦¬λ³„λ΅ μ•λ§μ€ μ»΄ν¬λ„νΈλ¥Ό λ¶„κΈ°μ μΌλ΅ λ λ”λ§ν•λ‹¤.<br/><br/>

<Callout>
β— μ•μ— μ¥ν™©ν•κ² μ„¤λ…ν•κ²ƒμΉκ³ λ” λ‹¨μν• ν•΄κ²°λ²•μ΄μ€λ‹¤. ν•΄λ‹Ή ν•΄κ²° μ•„μ΄λ””μ–΄λ” μ΄μ „ μ‚¬μ„¤ κµμ΅μ—μ„ λ©ν† λ§μ„ λ°›μ•λ λ©ν† λ¶„κ» μ–»μ€ μ•„μ΄λ””μ–΄μ€λ”λ°, λ‹¤λ¥Έ λ” μΆ‹μ€ μ•„μ΄λ””μ–΄κ°€ μλ”μ§€ μƒκ°ν•΄λ΄λ„ λ  κ²ƒ κ°™λ‹¤.

</Callout>

<br />

## κµ¬ν„

<br />

<FileName>λ³€κ²½λ GNB μ»΄ν¬λ„νΈ</FileName>

```tsx
const GNB = () => {
  const params = useSearchParams();
  const router = useRouter();
  return (
    <div className="shadow-custom-light border-b border-gray100 ">
     ...
         <div
          onClick={() => {
            router.push('/?category=product');
          }}
          ...
          >
          ν™
        </div>
         <div
          onClick={() => {
            router.push('/?category=newissue');
          }}
          ...
          >
          μµμ‹  μ΄μ
        </div>
         <div
          onClick={() => {
            router.push('/?category=product');
          }}
          ...
          >
          μ΅°κ° ν¬μ μƒν’
        </div>
        <div
          onClick={() => {
            router.push('/?category=report');
          }}
          ...
          >
          λ¦¬ν¬νΈ
        </div>
      </div>
    </div>
  );
};
```

<br />
<br />

<FileName>λ³€κ²½λ Mainpage</FileName>

```tsx
const HomePage = async ({
  searchParams,
}: {
  searchParams: { [key: string]: string | string[] | undefined };
}) => {
  const response = await fetch(`${process.env.BASE_URL}/summary/recent/building`, {
    cache: 'no-store',
  });
  const data: SummaryData = await response.json();
  return (
    <div>
      <Navbar />

      {searchParams['category'] === 'newissue' ? (
        <RecentlyIssueIndex />
      ) : searchParams['category'] === 'product' ? (
        <ProductIndex divide={data.divide} summary={data.summary} />
      ) : searchParams['category'] === 'report' ? (
        <ReportIndex />
      ) : (
        <HomeIndex />
      )}
    </div>
  );
};
```

<br />
<br />

<Callout>
β— zustand μ‚¬μ©μ²λ¥Ό λ¨λ‘ searchParamsλ΅ λ³€κ²½ν•΄μ£Όμ—κ³ , μ΄λ¥Ό μƒνƒ κ΄€λ¦¬λ¥Ό λ‹¨μν™”ν•κ³ , μƒνƒ λ³€ν™”μ— λ”°λ¥Έ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§(SSR)μ„ μμ—°μ¤λ½κ² κµ¬ν„ν•  μ μμ–΄ νμ΄μ§€ λ΅λ”© μ†λ„μ™€ SEO μµμ ν™”λ¥Ό λ™μ‹μ— λ‹¬μ„±ν•  μ μλ‹¤.

</Callout>

<br />

## λ¬Έμ  λ°μƒ

![](/images/tech/status-management-strategy/3.png)

ν•μ§€λ§ λ©”μΈ νμ΄μ§€μ™€ μ΅°κ°ν¬μ μƒν’ μ»΄ν¬λ„νΈλ¥Ό μ„λ²„ μ»΄ν¬λ„νΈλ΅ μ „ν™ ν›„ λΉλ“λ¥Ό ν• κ²°κ³Ό μ„μ™€ κ°™μ€ μ¤λ¥κ°€ λ°μƒν–λ‹¤. κ±°μ 1μ‹κ°„ λ™μ• κµ¬κΈ€λ§, μ¤νƒμ¤λ²„ν”λ΅μ°, chatGPTλ¥Ό μ΄μ©ν•΄μ„ κ΄€λ ¨ μ¤λ¥λ¥Ό μ°Ύμ•„λ³΄μ•λ”λ° λ„λ¬΄μ§€ μ–΄λ–¤ λ¬Έμ μΈμ§€ νμ•… ν•  μ μ—†μ—λ‹¤. μ• μ μλ”κ±΄ `ModalProvider` μ—μ„ μΌμ–΄λ‚ λ¬Έμ λΌλ”κ²ƒ λΏ<br /><br />

<FileName>ModalProvider</FileName>

```tsx
'use client';
import Quitmodal from '@/components/modal/Quitmodal';
import { useModalStore } from '@/store/modal.store';
import React from 'react';
import { createPortal } from 'react-dom';

const ModalProvider = () => {
  const { open, modalType } = useModalStore();
  const $portalRoot = typeof window !== 'undefined' ? document.getElementById('root-portal') : null;

  if ($portalRoot == null) {
    return null;
  }
  return createPortal(<div>{open && modalType === 'secession' && <Quitmodal />}</div>, $portalRoot);
};

export default ModalProvider;
```

λ¨Όμ € `ModalProvider` μ—μ„λ” μ „μ—­ λ¨λ‹¬ μ—΄λ¦Ό Stateλ¥Ό κ°μ§€ν•κ³  openμ΄ trueκ°€ λλ‹¤λ©΄, ν•΄λ‹Ή ν•λ” modalTypeμ— λ§λ” λ¨λ‹¬μ΄ $portalRoot μ„μΉμ— λ λ”λ§ λλ‹¤. μ΄λ” μ¤‘λ³µλ λ¨λ‹¬ state μ½”λ“μ™€, μΌκ΄€λ λ¨λ‹¬ λ λ”λ§ μ„μΉλ¥Ό μ„ν•¨μΈλ°, μ•„λ μ°Έκ³ κΈ€μ„ μ½μ–΄λ³΄λ©΄ μΆ‹λ‹¤.

[μ°Έκ³ κΈ€](https://www.banghojin.site/experience/next-blog-manage-modal)<br /><br />

<FileName>RootLayout</FileName>

```tsx
const ModalProvider = dynamic(() => import('@/providers/ModalProvider'), { ssr: false });

...

export default function RootLayout({
  children
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="kr" className={`${pretendard.variable}`}>
      <body className={pretendard.className}>
      ...
            <Gnb />
            {children}
            <ModalProvider />
            <div id="root-portal"></div>
      </body>
    </html>
  );
}
```

RootLayoutμ—μ„λ” ν•΄λ‹Ή ModalProviderλ¥Ό ssr falseμΈ μƒνƒλ΅ dynamic import ν•κ³  μλ‹¤. μ•„λ§ μ΄ λ¶€λ¶„μ—μ„ λ¬Έμ κ°€ λ°μƒν–λ‹¤κ³  μƒκ°ν–λ‹¤. μ™λƒν•λ©΄ κΈ°μ΅΄μ—λ” λ©”μΈνμ΄μ§€μ™€ ModalProvider λ¨λ‘ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ€κΈ° λ•λ¬Έμ— μ •μƒμ μΌλ΅ λ λ”λ§μ΄ λ λ°λ©΄, μ΄μ  λ©”μΈνμ΄μ§€μ™€λ” μ„λ²„ μ»΄ν¬λ„νΈκ°€ λμ—κΈ° λ•λ¬Έμ— μ•μ„ λ§ν•λ€λ΅ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ μ•„λ μ„λ²„ μ»΄ν¬λ„νΈκ°€ μ„μΉ ν•κ² λ κ²ƒμ΄λ‹¤.

<br />

## ν•΄κ²°

μ λ° μ΄ λ¬Έμ κ°€ λ§κΈΈ λ°”λΌλ©°, μ„μ— μ‘μ„±ν• ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ ν•μ„λ΅ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό κ°€μ§ μ μλ” μ½”λ“λ¥Ό μ‚¬μ©ν•μ—¬ κΈ°μ΅΄ RootLayoutκ³Ό ModalProvider μ½”λ“λ¥Ό λ‹¤μ‹ μ‘μ„±ν–λ‹¤.<br /><br />

<FileName>ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°€ μ„λ²„μ»΄ν¬λ„νΈλ¥Ό ν•μ„ μμ‹μΌλ΅ κ°–λ”λ²•</FileName>

```tsx
import ClientComponent from './ClientComponent';
import ServerComponent from './ServerComponent';

export default function Page() {
  return (
    <ClientComponent>
      <ServerComponent />
    </ClientComponent>
  );
}

('use client');

export default function ClientComponent({ children }) {
  return <>{children}</>;
}
```

ν•΄λ‹Ή λ°©μ‹μ€ μ„λ²„μ—μ„ λ™μ μΌλ΅ κ°€μ Έμ¤λ” ν•μ„ λ°μ΄ν„°λ¥Ό λ³€κ²½ν•κ±°λ‚ λ™μ μΌλ΅ μ΅°μ‘ν•  μ μ—†λ‹¤λ” λ‹¨μ μ΄ μ΅΄μ¬ ν•λ‹¤κ³  ν–λ”λ°, λ¨λ‹¬μ—μ„λ” ν•μ„ μ„λ²„ μ»΄ν¬λ„νΈμ λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•λ” λ¶€λ¶„μ΄ μ—†κ³ , μƒνƒμ™€ ν›… μ—­μ‹ λ‹¨μν μ „μ—­ λ¨λ‹¬ μ—΄λ¦Ό Stateμ„ λ‹«λ” λ™μ‘λ°–μ— μ—†κΈ° λ•λ¬Έμ— μƒμ„ λ¨λ‹¬κ³Ό ν•μ„ μ„λ²„ μ»΄ν¬λ„νΈμ™€ μ—°κ΄€μλ” λ¶€λ¶„μ΄ μ—†λ‹¤κ³  νλ‹¨ν•μ—¬ κ³Όκ°ν μ‚¬μ©ν•κ² λμ—λ‹¤.<br /><br />

<FileName>λ³€κ²½λ ModalProvider</FileName>

```tsx
'use client';

const ModalProvider = ({ children }: { children: React.ReactNode }) => {
  const { open, modalType } = useModalStore();
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
  }, []);

  if (!mounted) {
    return null;
  }

  const $portalRoot = document.getElementById('root-portal');
  if (!$portalRoot) return null;

  return createPortal(
    <div>
      {children} // Here!
      {open && modalType === 'secession' && <Quitmodal />}
    </div>,
    $portalRoot
  );
};

export default ModalProvider;
```

<br />
<br />

<FileName>λ³€κ²½λ RootLayout</FileName>

```tsx
export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="kr" className={`${pretendard.variable}`}>
      <body className={pretendard.className}>
        ...
        <Gnb />
        <ModalProvider>{children}</ModalProvider>
        <div id="root-portal"></div>
        ...
      </body>
    </html>
  );
}
```

### κ²°κ³Ό

![](/images/tech/status-management-strategy/4.png)

> μ‚¬μ‹¤ μ•„μ§κΉμ§€λ„ μ΄κ² μ •ν™•ν• μ΄μ μΈμ§€λ” λ¨λ¥΄κ² μΌλ‚, μΌλ‹¨μ€ μƒκ°ν•λ€λ΅ ModalProviderμ dynamic import κ°μ„  λ°©μ‹μΌλ΅ μ½”λ“λ¥Ό λ³€κ²½ν• κ²°κ³Ό, κΈ°μ΅΄ λΉλ“ λ¬Έμ λ¥Ό ν•΄κ²° ν•  μ μμ—λ‹¤. μΆ€ λ” κΉμ€ μ΄ν•΄μ™€ κ³µλ¶€κ°€ ν•„μ”ν•λ‹¤κ³  μƒκ°ν•λ©°, λ‚μ¤‘μ— λ‚΄κ°€ μ΄ κΈ€μ„ λ³΄λ©° μ•„ μ΄κ±΄ μ΄ λ¬Έμ μ§€ ν•λ©° λ‹¨λ²μ— μ• μ μμ„λ§νΌ μ„±μ¥ν–μΌλ©΄ μΆ‹κ² λ‹¤.

<br />

## λ§λ¬΄λ¦¬

<Callout>
π’΅ μ²μμ—λ” `zustand`μ™€ κ°™μ€ ν΄λΌμ΄μ–ΈνΈ μƒνƒ κ΄€λ¦¬ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ μƒνƒλ¥Ό μ „μ—­μΌλ΅ κ΄€λ¦¬ν•λ ¤ ν–μΌλ‚, μ„λ²„ μ»΄ν¬λ„νΈμ™€μ νΈν™μ„± λ¬Έμ λ΅ μΈν•΄ μ–΄λ ¤μ›€μ„ κ²μ—λ‹¤. μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ μƒνƒλ¥Ό URLμ `searchParams`λ΅ κ΄€λ¦¬ν•λ” λ°©λ²•μΌλ΅ μ „ν™ν–μΌλ©°,   μ΄λ¥Ό ν†µν•΄ μ½”λ“ λ‹¨μν™”μ™€ ν•¨κ» SSR λ° SEO μµμ ν™”λ¥Ό λ‹¬μ„±ν•  μ μμ—λ‹¤.

κ·Έλ¬λ‚, μ΄ κ³Όμ •μ—μ„ μƒλ΅μ΄ λ¬Έμ κ°€ λ°μƒν–λ”λ°, ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ™€ μ„λ²„ μ»΄ν¬λ„νΈ κ°„μ κ΄€κ³„λ΅ μΈν•΄ λΉλ“ μ¤λ¥κ°€ λ°μƒν–λ‹¤. μ΄ λ¬Έμ λ” ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ λ‚΄μ—μ„ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό ν¬ν•¨ν•λ” λ°©λ²•μ„ μ μ©ν•μ—¬ ν•΄κ²°ν•  μ μμ—λ‹¤

μ΄λ² κ²½ν—μ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ»΄ν¬λ„νΈμ κµ¬μ΅°μ  μ°¨μ΄λ¥Ό μ΄ν•΄ν•κ³ , μƒνƒ κ΄€λ¦¬μ™€ SSR, λ λ”λ§ μ„±λ¥μ„ μµμ ν™”ν•λ” λ° ν•„μ”ν• μ „λµμ„ μƒκ°ν•΄λ³Ό μ μμ—λ‹¤.

</Callout>

<br />

---
